"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6552],{6552:(P,m,l)=>{l.r(m),l.d(m,{SettingsPageModule:()=>j});var u=l(8434),d=l(4341),a=l(3092),h=l(9262),c=l(467),e=l(1360),f=l(2497),p=l(5032),_=l(3923),k=l(6491);function F(i,g){1&i&&(e.j41(0,"ion-item",11)(1,"ion-note",12),e.nrm(2,"ion-icon",22),e.EFF(3," Background tracking will continue even when the app is in the background. A persistent notification will show when tracking is active. "),e.k0s()())}function b(i,g){1&i&&(e.j41(0,"ion-item",11)(1,"ion-note",23),e.nrm(2,"ion-icon",24),e.EFF(3," For reliable tracking after app termination on Android, you may need to: "),e.j41(4,"ul")(5,"li"),e.EFF(6,"Disable battery optimization (in Settings)"),e.k0s(),e.j41(7,"li"),e.EFF(8,"Allow app to run in background (in app settings)"),e.k0s(),e.j41(9,"li"),e.EFF(10,'Check that the app has "ignore battery optimizations" permission'),e.k0s()()()())}function S(i,g){if(1&i){const r=e.RV6();e.j41(0,"ion-item",13),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.requestBatteryOptimization())}),e.nrm(1,"ion-icon",25),e.j41(2,"ion-label")(3,"h2"),e.EFF(4,"Battery Optimization"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Disable battery optimization for reliable background tracking"),e.k0s()()()}}function C(i,g){if(1&i){const r=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3,"Reference Location"),e.k0s(),e.j41(4,"p"),e.EFF(5),e.nI1(6,"number"),e.nI1(7,"number"),e.k0s()(),e.j41(8,"ion-button",20),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.clearReferenceLocation())}),e.EFF(9,"Clear"),e.k0s()()}if(2&i){const r=e.XpG();e.R7$(5),e.Lme("Lat: ",e.i5U(6,2,r.referenceLocation.latitude,"1.6-6"),", Lng: ",e.i5U(7,5,r.referenceLocation.longitude,"1.6-6"),"")}}const y=[{path:"",component:(()=>{var i;class g{constructor(t,n,s,o,T,v){this.locationService=t,this.alertController=n,this.toastController=s,this.router=o,this.platform=T,this.appComponent=v,this.settings={isTrackingEnabled:!1,isBackgroundTrackingEnabled:!1,showNotification:!0,trackingInterval:10,locationAccuracy:"high",radius:10},this.referenceLocation=null,this.settingsSubscription=null}ngOnInit(){this.settingsSubscription=this.locationService.getSettings().subscribe(t=>{this.settings={...t},this.referenceLocation=t.referenceLatitude&&t.referenceLongitude?{latitude:t.referenceLatitude,longitude:t.referenceLongitude,accuracy:0,timestamp:Date.now()}:null})}ngOnDestroy(){this.settingsSubscription&&(this.settingsSubscription.unsubscribe(),this.settingsSubscription=null)}onSettingsChange(){var t=this;return(0,c.A)(function*(){yield t.locationService.updateSettings(t.settings),t.settings.isTrackingEnabled&&((yield t.locationService.checkLocationPermissions())||(yield t.requestPermissions())),t.showToast("Settings updated")})()}requestPermissions(){var t=this;return(0,c.A)(function*(){(yield t.locationService.requestLocationPermissions())?t.showToast("Location permissions granted"):t.showToast("Location permissions denied","danger")})()}storeCurrentLocation(){var t=this;return(0,c.A)(function*(){const n=yield t.locationService.getCurrentPosition();n?(t.referenceLocation=n,yield t.locationService.updateSettings({referenceLatitude:n.latitude,referenceLongitude:n.longitude}),t.showToast("Current location stored")):t.showToast("Failed to get current location","danger")})()}clearReferenceLocation(){var t=this;return(0,c.A)(function*(){t.referenceLocation=null,yield t.locationService.updateSettings({referenceLatitude:void 0,referenceLongitude:void 0}),t.showToast("Reference location cleared")})()}confirmClearHistory(){var t=this;return(0,c.A)(function*(){yield(yield t.alertController.create({header:"Clear Location History",message:"Are you sure you want to clear all your location history data? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Clear",role:"destructive",handler:()=>{t.clearLocationHistory()}}]})).present()})()}clearLocationHistory(){var t=this;return(0,c.A)(function*(){yield t.locationService.clearLocationHistory(),t.showToast("Location history cleared")})()}showToast(t,n="success"){var s=this;return(0,c.A)(function*(){yield(yield s.toastController.create({message:t,duration:2e3,color:n,position:"bottom"})).present()})()}requestBatteryOptimization(){var t=this;return(0,c.A)(function*(){if(t.platform.is("android"))try{yield t.appComponent.requestBatteryOptimizationExemption()}catch(n){console.error("Failed to open battery settings:",n),t.showAlert("Error","Unable to open battery optimization settings. Please do this manually in your device settings.")}else t.showAlert("Information","Battery optimization settings are only available on Android devices.")})()}showAlert(t,n){var s=this;return(0,c.A)(function*(){yield(yield s.alertController.create({header:t,message:n,buttons:["OK"]})).present()})()}}return(i=g).\u0275fac=function(t){return new(t||i)(e.rXU(f.N),e.rXU(a.hG),e.rXU(a.K_),e.rXU(_.Ix),e.rXU(p.OD),e.rXU(k.Z))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-settings"]],standalone:!1,decls:93,vars:18,consts:[["color","primary"],["slot","start"],[3,"ngModelChange","ionChange","ngModel"],[3,"ngModelChange","ionChange","ngModel","disabled"],["lines","none",4,"ngIf"],[3,"value"],["value","high"],["value","medium"],["value","low"],["min","5","max","100","step","5","snaps","true",3,"ngModelChange","ionChange","ngModel"],["slot","end"],["lines","none"],["color","medium"],[3,"click"],["name","locate","slot","start"],[3,"click",4,"ngIf"],["name","pin","slot","start"],["slot","end","fill","outline",3,"click"],[4,"ngIf"],["name","trash","slot","start"],["slot","end","fill","outline","color","danger",3,"click"],["name","information-circle","slot","start"],["name","information-circle","color","primary"],["color","warning"],["name","warning"],["name","battery","slot","start"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Settings"),e.k0s()()(),e.j41(6,"ion-content")(7,"ion-list")(8,"ion-list-header")(9,"ion-label"),e.EFF(10,"Location Tracking"),e.k0s()(),e.j41(11,"ion-item")(12,"ion-label"),e.EFF(13,"Enable Tracking"),e.k0s(),e.j41(14,"ion-toggle",2),e.mxI("ngModelChange",function(o){return e.DH7(n.settings.isTrackingEnabled,o)||(n.settings.isTrackingEnabled=o),o}),e.bIt("ionChange",function(){return n.onSettingsChange()}),e.k0s()(),e.j41(15,"ion-item")(16,"ion-label"),e.EFF(17,"Background Tracking"),e.k0s(),e.j41(18,"ion-toggle",3),e.mxI("ngModelChange",function(o){return e.DH7(n.settings.isBackgroundTrackingEnabled,o)||(n.settings.isBackgroundTrackingEnabled=o),o}),e.bIt("ionChange",function(){return n.onSettingsChange()}),e.k0s()(),e.DNE(19,F,4,0,"ion-item",4)(20,b,11,0,"ion-item",4),e.j41(21,"ion-item")(22,"ion-label"),e.EFF(23,"Show Notification"),e.k0s(),e.j41(24,"ion-toggle",3),e.mxI("ngModelChange",function(o){return e.DH7(n.settings.showNotification,o)||(n.settings.showNotification=o),o}),e.bIt("ionChange",function(){return n.onSettingsChange()}),e.k0s()(),e.j41(25,"ion-item")(26,"ion-label"),e.EFF(27,"Tracking Interval (seconds)"),e.k0s(),e.j41(28,"ion-select",2),e.mxI("ngModelChange",function(o){return e.DH7(n.settings.trackingInterval,o)||(n.settings.trackingInterval=o),o}),e.bIt("ionChange",function(){return n.onSettingsChange()}),e.j41(29,"ion-select-option",5),e.EFF(30,"5"),e.k0s(),e.j41(31,"ion-select-option",5),e.EFF(32,"10"),e.k0s(),e.j41(33,"ion-select-option",5),e.EFF(34,"30"),e.k0s(),e.j41(35,"ion-select-option",5),e.EFF(36,"60"),e.k0s(),e.j41(37,"ion-select-option",5),e.EFF(38,"300 (5 min)"),e.k0s()()(),e.j41(39,"ion-item")(40,"ion-label"),e.EFF(41,"Location Accuracy"),e.k0s(),e.j41(42,"ion-select",2),e.mxI("ngModelChange",function(o){return e.DH7(n.settings.locationAccuracy,o)||(n.settings.locationAccuracy=o),o}),e.bIt("ionChange",function(){return n.onSettingsChange()}),e.j41(43,"ion-select-option",6),e.EFF(44,"High"),e.k0s(),e.j41(45,"ion-select-option",7),e.EFF(46,"Medium"),e.k0s(),e.j41(47,"ion-select-option",8),e.EFF(48,"Low"),e.k0s()()(),e.j41(49,"ion-item")(50,"ion-label"),e.EFF(51,"Update Radius (meters)"),e.k0s(),e.j41(52,"ion-range",9),e.mxI("ngModelChange",function(o){return e.DH7(n.settings.radius,o)||(n.settings.radius=o),o}),e.bIt("ionChange",function(){return n.onSettingsChange()}),e.j41(53,"ion-label",1),e.EFF(54,"5m"),e.k0s(),e.j41(55,"ion-label",10),e.EFF(56,"100m"),e.k0s()()(),e.j41(57,"ion-item",11)(58,"ion-note",12),e.EFF(59),e.k0s()()(),e.j41(60,"ion-list")(61,"ion-list-header")(62,"ion-label"),e.EFF(63,"Permissions & Data"),e.k0s()(),e.j41(64,"ion-item",13),e.bIt("click",function(){return n.requestPermissions()}),e.nrm(65,"ion-icon",14),e.j41(66,"ion-label"),e.EFF(67,"Request Location Permissions"),e.k0s()(),e.DNE(68,S,7,0,"ion-item",15),e.j41(69,"ion-item"),e.nrm(70,"ion-icon",16),e.j41(71,"ion-label"),e.EFF(72,"Store Current Location"),e.k0s(),e.j41(73,"ion-button",17),e.bIt("click",function(){return n.storeCurrentLocation()}),e.EFF(74,"Save"),e.k0s()(),e.DNE(75,C,10,8,"ion-item",18),e.j41(76,"ion-item"),e.nrm(77,"ion-icon",19),e.j41(78,"ion-label"),e.EFF(79,"Clear Location History"),e.k0s(),e.j41(80,"ion-button",20),e.bIt("click",function(){return n.confirmClearHistory()}),e.EFF(81,"Clear"),e.k0s()()(),e.j41(82,"ion-list")(83,"ion-list-header")(84,"ion-label"),e.EFF(85,"App Information"),e.k0s()(),e.j41(86,"ion-item"),e.nrm(87,"ion-icon",21),e.j41(88,"ion-label")(89,"h2"),e.EFF(90,"Location Tracker"),e.k0s(),e.j41(91,"p"),e.EFF(92,"Version 1.0.0"),e.k0s()()()()()),2&t&&(e.R7$(14),e.R50("ngModel",n.settings.isTrackingEnabled),e.R7$(4),e.R50("ngModel",n.settings.isBackgroundTrackingEnabled),e.Y8G("disabled",!n.settings.isTrackingEnabled),e.R7$(),e.Y8G("ngIf",n.settings.isBackgroundTrackingEnabled),e.R7$(),e.Y8G("ngIf",n.settings.isBackgroundTrackingEnabled&&n.platform.is("android")),e.R7$(4),e.R50("ngModel",n.settings.showNotification),e.Y8G("disabled",!n.settings.isBackgroundTrackingEnabled||!n.settings.isTrackingEnabled),e.R7$(4),e.R50("ngModel",n.settings.trackingInterval),e.R7$(),e.Y8G("value",5),e.R7$(2),e.Y8G("value",10),e.R7$(2),e.Y8G("value",30),e.R7$(2),e.Y8G("value",60),e.R7$(2),e.Y8G("value",300),e.R7$(5),e.R50("ngModel",n.settings.locationAccuracy),e.R7$(10),e.R50("ngModel",n.settings.radius),e.R7$(7),e.SpI(" Higher values reduce GPS jitter, but may miss small movements. Current value: ",n.settings.radius,"m "),e.R7$(9),e.Y8G("ngIf",n.platform.is("android")),e.R7$(7),e.Y8G("ngIf",n.referenceLocation))},dependencies:[u.bT,d.BC,d.vS,a.Jm,a.QW,a.W9,a.eU,a.iq,a.uz,a.he,a.nf,a.AF,a.MC,a.JI,a.Ob,a.Nm,a.Ip,a.BC,a.BY,a.ai,a.hB,a.su,a.Je,u.QX],encapsulation:2}),g})()}];let E=(()=>{var i;class g{}return(i=g).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.iI.forChild(y),h.iI]}),g})(),j=(()=>{var i;class g{}return(i=g).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.MD,d.YN,a.bv,E]}),g})()}}]);